# Lucky Dice å‰ç«¯æ•…éšœæ’é™¤

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. Wagmi é…ç½®é”™è¯¯
**é”™è¯¯**: `connectorFn is not a function`

**åŸå› **: `createConfig` å’Œ `getDefaultConfig` åµŒå¥—ä½¿ç”¨å¯¼è‡´

**ä¿®å¤**: 
- æ–‡ä»¶: `lib/wagmi.ts`
- æ”¹ä¸ºç›´æ¥ä½¿ç”¨ `getDefaultConfig`

### 2. Hydration ä¸åŒ¹é…é”™è¯¯
**é”™è¯¯**: Server/Client rendered text ä¸åŒ¹é…

**åŸå› **: `chainId` åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¸²æŸ“æ—¶å€¼ä¸åŒ

**ä¿®å¤**:
- æ–‡ä»¶: `components/LuckyDiceApp.tsx`
- æ·»åŠ  `mounted` çŠ¶æ€
- åªåœ¨å®¢æˆ·ç«¯æŒ‚è½½åæ˜¾ç¤º chainId

### 3. COOP Header è­¦å‘Š
**è­¦å‘Š**: Base Account SDK è¦æ±‚ COOP ä¸èƒ½æ˜¯ 'same-origin'

**ä¿®å¤**:
- æ–‡ä»¶: `next.config.ts`
- å°† `Cross-Origin-Opener-Policy` æ”¹ä¸º `same-origin-allow-popups`
- å°† `source` ä» `/` æ”¹ä¸º `/:path*` ä»¥è¦†ç›–æ‰€æœ‰è·¯å¾„

## ğŸ”„ å¦‚ä½•é‡å¯å‰ç«¯

å¦‚æœä¿®æ”¹é…ç½®åéœ€è¦é‡å¯ï¼š

```bash
# åœæ­¢å½“å‰è¿è¡Œçš„å‰ç«¯æœåŠ¡ (Ctrl+C)
# ç„¶åé‡æ–°å¯åŠ¨
cd E:\Spring\Zama\lucky\frontend
npm run dev
```

## ğŸŒ éªŒè¯ä¿®å¤

1. åˆ·æ–°æµè§ˆå™¨é¡µé¢ (http://localhost:3000)
2. æ£€æŸ¥æ§åˆ¶å°ï¼Œä¸åº”è¯¥æœ‰ä»¥ä¸‹é”™è¯¯ï¼š
   - âŒ `connectorFn is not a function`
   - âŒ `Hydration failed`
   - âš ï¸ COOP header è­¦å‘Šåº”è¯¥æ¶ˆå¤±

## ğŸ“ å¸¸è§é—®é¢˜

### Q: é¡µé¢åŠ è½½ç¼“æ…¢ï¼Ÿ
**A**: Next.js ä½¿ç”¨ Turbopackï¼Œé¦–æ¬¡ç¼–è¯‘å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ã€‚åç»­ä¼šå¾ˆå¿«ã€‚

### Q: æ§åˆ¶å°æœ‰ "Failed to fetch" é”™è¯¯ï¼Ÿ
**A**: è¿™å¯èƒ½æ˜¯ï¼š
1. Hardhat èŠ‚ç‚¹æ²¡æœ‰è¿è¡Œ â†’ ç¡®ä¿ `npx hardhat node` åœ¨è¿è¡Œ
2. ç½‘ç»œé…ç½®é”™è¯¯ â†’ æ£€æŸ¥ MetaMask æ˜¯å¦è¿æ¥åˆ° http://localhost:8545
3. CORS é—®é¢˜ â†’ å·²é€šè¿‡ COOP header ä¿®å¤

### Q: çœ‹ä¸åˆ° "Connect Wallet" æŒ‰é’®ï¼Ÿ
**A**: 
1. ç¡®ä¿ RainbowKit æ­£å¸¸åŠ è½½
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯
3. åˆ·æ–°é¡µé¢

### Q: MetaMask æ— æ³•è¿æ¥ï¼Ÿ
**A**:
1. æ·»åŠ æœ¬åœ°ç½‘ç»œåˆ° MetaMaskï¼š
   - ç½‘ç»œåç§°: Hardhat Local
   - RPC URL: http://localhost:8545
   - Chain ID: 31337
   - è´§å¸ç¬¦å·: ETH
2. ç¡®ä¿é€‰æ‹©äº†æ­£ç¡®çš„ç½‘ç»œ

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹ Next.js ç¼–è¯‘çŠ¶æ€
å‰ç«¯ç»ˆç«¯ä¼šæ˜¾ç¤ºï¼š
```
âœ“ Compiled /page in XXXms
â—‹ Local: http://localhost:3000
```

### æŸ¥çœ‹ Hardhat èŠ‚ç‚¹çŠ¶æ€
Hardhat ç»ˆç«¯ä¼šæ˜¾ç¤ºæ¯ä¸ªäº¤æ˜“ï¼š
```
eth_sendTransaction
eth_getTransactionReceipt
...
```

### æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°
æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹ï¼š
- Console æ ‡ç­¾é¡µ - æŸ¥çœ‹é”™è¯¯å’Œæ—¥å¿—
- Network æ ‡ç­¾é¡µ - æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
- Application æ ‡ç­¾é¡µ - æŸ¥çœ‹å­˜å‚¨çš„æ•°æ®

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Next.js æ–‡æ¡£](https://nextjs.org/docs)
- [Wagmi æ–‡æ¡£](https://wagmi.sh/)
- [RainbowKit æ–‡æ¡£](https://www.rainbowkit.com/docs/introduction)
- [FHEVM æ–‡æ¡£](https://docs.zama.ai/fhevm)

## ğŸ†˜ ä»æœ‰é—®é¢˜ï¼Ÿ

å¦‚æœä»¥ä¸Šéƒ½æ— æ³•è§£å†³ï¼Œè¯·ï¼š
1. åœæ­¢æ‰€æœ‰æœåŠ¡
2. åˆ é™¤ `.next` ç›®å½•
3. é‡æ–°è¿è¡Œ `npm run dev`
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶åˆ·æ–°

