# ğŸŒ Lucky Dice - Sepolia æµ‹è¯•ç½‘ä½¿ç”¨æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®ä½ åœ¨ **Sepolia æµ‹è¯•ç½‘**ä¸Šä½¿ç”¨ Lucky Diceï¼Œä½“éªŒçœŸå®çš„å…¬é“¾ç¯å¢ƒã€‚

---

## âš™ï¸ Sepolia vs æœ¬åœ°ç½‘ç»œå¯¹æ¯”

| ç‰¹æ€§ | Sepolia æµ‹è¯•ç½‘ | Hardhat Local |
|------|---------------|---------------|
| **Chain ID** | 11155111 | 31337 |
| **RPC** | å…¬å…±èŠ‚ç‚¹ | http://localhost:8545 |
| **å‡ºå—æ—¶é—´** | ~12-15 ç§’ | å³æ—¶ |
| **è´¹ç”¨** | éœ€è¦æµ‹è¯•ç½‘ ETH | å…è´¹ï¼ˆ10000 ETHï¼‰ |
| **FHEVM** | RelayerSDK (CDN) | Mock æ¨¡å¼ |
| **åˆçº¦åœ°å€** | `0x1a84Ec...904A3c` | `0xe7f17...3f0512` |
| **é€‚ç”¨åœºæ™¯** | å…¬å¼€æµ‹è¯•ã€æ¼”ç¤º | å¿«é€Ÿå¼€å‘ |

---

## ğŸš€ å‰ç½®å‡†å¤‡

### 1ï¸âƒ£ è·å– Sepolia æµ‹è¯•ç½‘ ETH

#### æ–¹æ³• Aï¼šSepolia Faucetï¼ˆæ¨èï¼‰

**Alchemy Faucet**
```
ç½‘å€: https://sepoliafaucet.com/
è¦æ±‚: éœ€è¦ Alchemy è´¦æˆ·
é‡‘é¢: 0.5 ETH/å¤©
```

**ä½¿ç”¨æ­¥éª¤**:
1. è®¿é—® https://sepoliafaucet.com/
2. ç™»å½•æˆ–æ³¨å†Œ Alchemy è´¦æˆ·
3. è¾“å…¥ä½ çš„é’±åŒ…åœ°å€
4. ç‚¹å‡» "Send Me ETH"
5. ç­‰å¾… 1-2 åˆ†é’Ÿåˆ°è´¦

**å…¶ä»– Faucet**:
- https://sepolia-faucet.pk910.de/ï¼ˆPOW Faucetï¼‰
- https://www.infura.io/faucet/sepolia
- https://faucet.quicknode.com/ethereum/sepolia

### 2ï¸âƒ£ é…ç½® MetaMask

#### æ·»åŠ  Sepolia ç½‘ç»œ

1. **æ‰“å¼€ MetaMask**
2. **ç‚¹å‡»é¡¶éƒ¨ç½‘ç»œåç§°**
3. **é€‰æ‹© "æ·»åŠ ç½‘ç»œ"** æˆ–ç›´æ¥æœç´¢ "Sepolia"
4. **å¡«å†™ä¿¡æ¯**ï¼ˆå¦‚æœéœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼‰:

```
ç½‘ç»œåç§°: Sepolia Test Network
RPC URL: https://ethereum-sepolia-rpc.publicnode.com
Chain ID: 11155111
è´§å¸ç¬¦å·: ETH
åŒºå—æµè§ˆå™¨: https://sepolia.etherscan.io
```

5. **ä¿å­˜å¹¶åˆ‡æ¢**

### 3ï¸âƒ£ éªŒè¯å‰ç½®æ¡ä»¶

åœ¨å¼€å§‹å‰ç¡®è®¤ï¼š

- [ ] MetaMask å·²åˆ‡æ¢åˆ° **Sepolia Test Network**
- [ ] è´¦æˆ·è‡³å°‘æœ‰ **0.1 ETH**ï¼ˆç”¨äº gas è´¹ç”¨ï¼‰
- [ ] å‰ç«¯æœåŠ¡æ­£åœ¨è¿è¡Œï¼ˆhttp://localhost:3000ï¼‰
- [ ] ç½‘ç»œå¯ä»¥è®¿é—® `https://cdn.zama.ai`ï¼ˆRelayerSDKï¼‰

---

## ğŸ“ ä½¿ç”¨æ­¥éª¤

### ç¬¬ 1 æ­¥ï¼šå¯åŠ¨å‰ç«¯

```bash
cd E:\Spring\Zama\lucky\frontend
npm run dev
```

æˆ–è€…å¦‚æœå‰ç«¯å·²ç»åœ¨è¿è¡Œï¼Œç›´æ¥è®¿é—®ï¼š
```
http://localhost:3000
```

### ç¬¬ 2 æ­¥ï¼šåˆ‡æ¢åˆ° Sepolia ç½‘ç»œ

1. **æ‰“å¼€ MetaMask**
2. **ç‚¹å‡»é¡¶éƒ¨ç½‘ç»œåç§°**
3. **é€‰æ‹© "Sepolia Test Network"**
4. **åˆ·æ–°é¡µé¢**ï¼ˆ`Ctrl + F5`ï¼‰

### ç¬¬ 3 æ­¥ï¼šç­‰å¾… FHEVM åˆå§‹åŒ–

é¡µé¢åŠ è½½åï¼Œä¼šè‡ªåŠ¨ï¼š

1. **åŠ è½½ RelayerSDK**
   - ä» `https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs` ä¸‹è½½
   - æ§åˆ¶å°æ˜¾ç¤ºï¼š`[RelayerSDKLoader] load...`

2. **åˆå§‹åŒ– SDK**
   - è¿æ¥åˆ° Zama çš„ FHEVM åå¤„ç†å™¨
   - æ§åˆ¶å°æ˜¾ç¤ºï¼š`[useFhevm] createFhevmInstance status changed: sdk-loading`

3. **å°±ç»ª**
   - FHEVM Status æ˜¾ç¤ºï¼š`Ready âœ…`
   - Chain ID æ˜¾ç¤ºï¼š`11155111`

**é¢„æœŸæ—¶é—´**ï¼š10-30 ç§’ï¼ˆå–å†³äºç½‘ç»œé€Ÿåº¦ï¼‰

### ç¬¬ 4 æ­¥ï¼šè¿æ¥é’±åŒ…

1. ç‚¹å‡»å³ä¸Šè§’ **"Connect Wallet"**
2. é€‰æ‹© MetaMask
3. ç¡®è®¤è¿æ¥

### ç¬¬ 5 æ­¥ï¼šæäº¤æŠ•æ³¨

1. **é€‰æ‹©éª°å­å€¼**ï¼ˆ1-6ï¼‰
2. **ç‚¹å‡» "Submit encrypted roll"**
3. **MetaMask ç¡®è®¤äº¤æ˜“**
   - Gas è´¹ç”¨ï¼šçº¦ 0.001-0.005 ETH
   - ç­‰å¾…æ—¶é—´ï¼š12-15 ç§’
4. **ç­‰å¾…äº¤æ˜“ç¡®è®¤**
   - æ§åˆ¶å°æ˜¾ç¤ºäº¤æ˜“å“ˆå¸Œ
   - å¯ä»¥åœ¨ Sepolia Etherscan æŸ¥çœ‹ï¼š
     ```
     https://sepolia.etherscan.io/tx/YOUR_TX_HASH
     ```

### ç¬¬ 6 æ­¥ï¼šè§£å¯†æŸ¥çœ‹ç»“æœ

1. **ç‚¹å‡» "Decrypt active roll"**
2. **ç­‰å¾…è§£å¯†**ï¼ˆ5-10 ç§’ï¼‰
3. **æŸ¥çœ‹ç»“æœ**ï¼š
   - éª°å­å€¼
   - ç´¯è®¡æ€»å’Œ
   - æ˜¯å¦ä¸­å¥–

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šRelayerSDK åŠ è½½å¤±è´¥

#### é”™è¯¯ä¿¡æ¯
```
RelayerSDKLoader: window object does not contain a valid relayerSDK object.
```

#### å¯èƒ½åŸå› å’Œè§£å†³æ–¹æ¡ˆ

**åŸå›  Aï¼šç½‘ç»œæ— æ³•è®¿é—® Zama CDN**
```bash
# æµ‹è¯•è¿æ¥
curl https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs

# æˆ–åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®
https://cdn.zama.ai/relayer-sdk-js/0.2.0/relayer-sdk-js.umd.cjs
```

**è§£å†³**ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å…³é—­ VPN/ä»£ç†
- å°è¯•æ›´æ¢ç½‘ç»œç¯å¢ƒ

**åŸå›  Bï¼šæµè§ˆå™¨ CORS æˆ–å®‰å…¨ç­–ç•¥**

**è§£å†³**ï¼š
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
2. æŸ¥çœ‹ Network æ ‡ç­¾é¡µ
3. æ‰¾åˆ° `relayer-sdk-js.umd.cjs` è¯·æ±‚
4. æ£€æŸ¥æ˜¯å¦æœ‰ CORS é”™è¯¯

**åŸå›  Cï¼šæµè§ˆå™¨æ‰©å±•å¹²æ‰°**

**è§£å†³**ï¼š
- å°è¯•æ— ç—•æ¨¡å¼/éšç§æµè§ˆæ¨¡å¼
- æš‚æ—¶ç¦ç”¨æµè§ˆå™¨æ‰©å±•

### é—®é¢˜ 2ï¼šFHEVM Status ä¸€ç›´æ˜¾ç¤º "Connecting"

#### æ£€æŸ¥æ­¥éª¤

1. **æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°**ï¼ˆF12ï¼‰
2. **æŸ¥çœ‹ Console æ ‡ç­¾é¡µ**
3. **æŸ¥æ‰¾é”™è¯¯ä¿¡æ¯**

**å¸¸è§æ—¥å¿—**ï¼š
```javascript
[RelayerSDKLoader] load...
[RelayerSDKLoader] add script to DOM...
[RelayerSDKLoader] script added!
[useFhevm] createFhevmInstance status changed: sdk-loading
[useFhevm] createFhevmInstance status changed: sdk-loaded
[useFhevm] createFhevmInstance status changed: sdk-initializing
[useFhevm] createFhevmInstance status changed: sdk-initialized
[useFhevm] createFhevmInstance created!
```

**å¦‚æœå¡åœ¨æŸä¸€æ­¥**ï¼š
- `sdk-loading`: CDN åŠ è½½é—®é¢˜
- `sdk-initializing`: åå¤„ç†å™¨è¿æ¥é—®é¢˜
- é•¿æ—¶é—´æ— å“åº”ï¼šåˆ·æ–°é¡µé¢é‡è¯•

### é—®é¢˜ 3ï¼šäº¤æ˜“å¤±è´¥

#### é”™è¯¯ï¼šInsufficient funds
**è§£å†³**ï¼šä» Faucet è·å–æ›´å¤šæµ‹è¯• ETH

#### é”™è¯¯ï¼šTransaction reverted
**å¯èƒ½åŸå› **ï¼š
- åˆçº¦æ‰§è¡Œå¤±è´¥
- ACL æƒé™é—®é¢˜
- Gas ä¼°ç®—é”™è¯¯

**è§£å†³**ï¼š
1. æ£€æŸ¥ Sepolia Etherscan ä¸Šçš„äº¤æ˜“è¯¦æƒ…
2. æŸ¥çœ‹åˆçº¦è°ƒç”¨å¤±è´¥çš„å…·ä½“åŸå› 
3. åœ¨æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

### é—®é¢˜ 4ï¼šè§£å¯†å¤±è´¥

#### é”™è¯¯ï¼šNot authorized
**åŸå› **ï¼šä½ çš„åœ°å€æ²¡æœ‰è§£å¯†æƒé™

**è§£å†³**ï¼š
- åªèƒ½è§£å¯†è‡ªå·±æäº¤çš„æŠ•æ³¨
- å¦‚æœæ˜¯å…¶ä»–äººçš„æŠ•æ³¨ï¼Œéœ€è¦åˆçº¦ owner æˆæƒ

#### é”™è¯¯ï¼šTimeout
**åŸå› **ï¼šFHEVM åå¤„ç†å™¨å“åº”è¶…æ—¶

**è§£å†³**ï¼š
- ç­‰å¾…ä¸€æ®µæ—¶é—´åé‡è¯•
- åˆ·æ–°é¡µé¢é‡æ–°è¿æ¥

---

## ğŸ¯ æµ‹è¯•ç½‘ç‰¹æ®ŠåŠŸèƒ½

### 1. æŸ¥çœ‹åˆçº¦åœ¨ Etherscan

```
åˆçº¦åœ°å€: 0x1a84Ec39BA9480D67740B37bD1aFdE4fEA904A3c
Etherscan: https://sepolia.etherscan.io/address/0x1a84Ec39BA9480D67740B37bD1aFdE4fEA904A3c
```

ä½ å¯ä»¥ï¼š
- æŸ¥çœ‹æ‰€æœ‰äº¤æ˜“å†å²
- æŸ¥çœ‹åˆçº¦ä»£ç ï¼ˆå¦‚æœå·²éªŒè¯ï¼‰
- æŸ¥çœ‹åˆçº¦çŠ¶æ€å’Œäº‹ä»¶
- è¿½è¸ªä½ çš„æŠ•æ³¨äº¤æ˜“

### 2. å…¬å¼€æ¼”ç¤º

Sepolia æ˜¯å…¬å…±æµ‹è¯•ç½‘ï¼Œä½ å¯ä»¥ï¼š
- åˆ†äº«åˆçº¦åœ°å€ç»™å…¶ä»–äºº
- è®©æœ‹å‹ä¹Ÿæäº¤æŠ•æ³¨
- ä½“éªŒå¤šäººæ¸¸æˆåœºæ™¯
- æ¼”ç¤ºåŠ å¯†å½©ç¥¨åŸç†

### 3. æŒä¹…åŒ–æ•°æ®

- åˆçº¦éƒ¨ç½²åœ¨å…¬é“¾ä¸Šï¼Œæ•°æ®æ°¸ä¹…ä¿å­˜
- é‡å¯ç”µè„‘/æµè§ˆå™¨åï¼ŒæŠ•æ³¨è®°å½•ä¾ç„¶å­˜åœ¨
- å¯ä»¥éšæ—¶å›æ¥æŸ¥çœ‹å†å²æŠ•æ³¨

---

## âš¡ æ€§èƒ½å¯¹æ¯”

### æŠ•æ³¨å»¶è¿Ÿ

| æ“ä½œ | Sepolia | Hardhat Local |
|------|---------|---------------|
| æäº¤æŠ•æ³¨ | 12-15 ç§’ | å³æ—¶ï¼ˆ< 1 ç§’ï¼‰ |
| è§£å¯†æŸ¥çœ‹ | 5-10 ç§’ | 2-3 ç§’ |
| æŸ¥çœ‹å¥–æ±  | 5-10 ç§’ | 2-3 ç§’ |

### Gas è´¹ç”¨ä¼°ç®—

| æ“ä½œ | Gas Used | ETH (çº¦) | USD (çº¦) |
|------|----------|----------|----------|
| æäº¤æŠ•æ³¨ | ~300,000 | 0.003 | $7 |
| è§£å¯†æŠ•æ³¨ | ~100,000 | 0.001 | $2 |

*æ³¨ï¼šæµ‹è¯•ç½‘ ETH æ— ä»·å€¼ï¼Œè´¹ç”¨ä»…ä¾›å‚è€ƒ*

---

## ğŸ“Š è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼ŒæŸ¥çœ‹ï¼š

**RelayerSDK åŠ è½½**ï¼š
```javascript
[RelayerSDKLoader] load...
[RelayerSDKLoader] script added!
```

**FHEVM åˆå§‹åŒ–**ï¼š
```javascript
[useFhevm] createFhevmInstance status changed: creating
[useFhevm] createFhevmInstance created!
```

**åˆçº¦è°ƒç”¨**ï¼š
```javascript
[useLuckyDice] Submitting roll...
[useLuckyDice] Roll submitted: #5
```

### ç½‘ç»œè¯·æ±‚ç›‘æ§

1. æ‰“å¼€ **Network** æ ‡ç­¾é¡µ
2. è¿‡æ»¤ `zama.ai` æŸ¥çœ‹ SDK åŠ è½½
3. è¿‡æ»¤ `sepolia` æŸ¥çœ‹ RPC è¯·æ±‚
4. æ£€æŸ¥æ˜¯å¦æœ‰å¤±è´¥çš„è¯·æ±‚ï¼ˆçº¢è‰²ï¼‰

### MetaMask Activity

1. æ‰“å¼€ MetaMask
2. ç‚¹å‡» **Activity** æ ‡ç­¾
3. æŸ¥çœ‹æ‰€æœ‰äº¤æ˜“çŠ¶æ€
4. ç‚¹å‡»äº¤æ˜“æŸ¥çœ‹è¯¦æƒ…
5. ç‚¹å‡» **View on block explorer** è·³è½¬åˆ° Etherscan

---

## ğŸ”’ å®‰å…¨æç¤º

### âš ï¸ æµ‹è¯•ç½‘æ³¨æ„äº‹é¡¹

```
âœ… Sepolia æ˜¯æµ‹è¯•ç½‘ï¼ŒETH æ— ä»·å€¼
âœ… å¯ä»¥è‡ªç”±å®éªŒï¼Œä¸ç”¨æ‹…å¿ƒèµ„é‡‘æŸå¤±
âœ… ä½†ä»ç„¶æ˜¯å…¬å¼€çš„ï¼Œäº¤æ˜“å¯è¢«ä»»ä½•äººæŸ¥çœ‹
âŒ ä¸è¦åœ¨æµ‹è¯•ç½‘ä¸Šæµ‹è¯•çœŸå®çš„ç§é’¥æˆ–æ•æ„Ÿæ•°æ®
âŒ ä¸è¦åœ¨æµ‹è¯•ç½‘ä¸Šå­˜å‚¨é‡è¦ä¿¡æ¯
```

### ğŸ” éšç§è¯´æ˜

å³ä½¿åœ¨ Sepolia ä¸Šï¼š
- âœ… ä½ çš„éª°å­é€‰æ‹©**ä»ç„¶åŠ å¯†**
- âœ… å…¶ä»–äºº**æ— æ³•çœ‹åˆ°**ä½ çš„é€‰æ‹©
- âœ… åªæœ‰è§£å¯†æ‰èƒ½çœ‹åˆ°ç»“æœ
- âš ï¸ ä½†ä½ çš„é’±åŒ…åœ°å€æ˜¯**å…¬å¼€**çš„
- âš ï¸ äº¤æ˜“å“ˆå¸Œã€æ—¶é—´æˆ³æ˜¯**å…¬å¼€**çš„

---

## ğŸ†˜ å¸¸è§é—®é¢˜ FAQ

### Q1: ä¸ºä»€ä¹ˆè¦ç”¨ Sepolia è€Œä¸æ˜¯æœ¬åœ°ï¼Ÿ
**A**: 
- Sepolia æ˜¯çœŸå®çš„å…¬é“¾ç¯å¢ƒ
- å¯ä»¥ä½“éªŒçœŸå®çš„å‡ºå—æ—¶é—´å’Œç½‘ç»œå»¶è¿Ÿ
- å¯ä»¥å¤šäººåä½œæµ‹è¯•
- æ•°æ®æŒä¹…åŒ–ï¼Œä¸ä¼šå› é‡å¯è€Œä¸¢å¤±

### Q2: Sepolia ETH ä»å“ªé‡Œè·å–ï¼Ÿ
**A**: 
- ä½¿ç”¨ Faucetï¼ˆè§ä¸Šæ–‡"è·å– Sepolia æµ‹è¯•ç½‘ ETH"ï¼‰
- æ¯å¤©å¯ä»¥é¢†å– 0.1-0.5 ETH
- å¦‚æœ Faucet ä¸å¯ç”¨ï¼Œå¯ä»¥åœ¨ç¤¾åŒºè®ºå›è¯·æ±‚

### Q3: RelayerSDK æ˜¯ä»€ä¹ˆï¼Ÿ
**A**: 
- Zama æä¾›çš„ JavaScript SDK
- ç”¨äºåœ¨æµè§ˆå™¨ä¸­è¿›è¡Œ FHEVM åŠ å¯†æ“ä½œ
- åœ¨ Sepolia ä¸Šæ˜¯å¿…éœ€çš„
- æœ¬åœ°ç½‘ç»œä½¿ç”¨ Mock æ¨¡å¼ï¼ˆä¸éœ€è¦ï¼‰

### Q4: å¯ä»¥åŒæ—¶è¿æ¥æœ¬åœ°å’Œ Sepolia å—ï¼Ÿ
**A**: 
- ä¸èƒ½åŒæ—¶è¿æ¥
- ä½†å¯ä»¥å¿«é€Ÿåˆ‡æ¢ç½‘ç»œ
- åˆçº¦åœ°å€å’Œæ•°æ®æ˜¯ç‹¬ç«‹çš„
- åˆ‡æ¢ååˆ·æ–°é¡µé¢å³å¯

### Q5: äº¤æ˜“å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ
**A**: 
1. æ£€æŸ¥è´¦æˆ·ä½™é¢æ˜¯å¦è¶³å¤Ÿ
2. åœ¨ Etherscan æŸ¥çœ‹å¤±è´¥åŸå› 
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
4. å°è¯•å¢åŠ  Gas Limit

### Q6: ä¸ºä»€ä¹ˆ Sepolia è¿™ä¹ˆæ…¢ï¼Ÿ
**A**: 
- Sepolia æ˜¯çœŸå®çš„åŒºå—é“¾ç½‘ç»œ
- å‡ºå—æ—¶é—´å›ºå®šçº¦ 12-15 ç§’
- è¿™æ˜¯æ­£å¸¸çš„ï¼Œä¸æ˜¯ bug
- æœ¬åœ°ç½‘ç»œå¯ä»¥å³æ—¶å‡ºå—ï¼ˆå¼€å‘ç”¨ï¼‰

---

## ğŸ“ ç›¸å…³æ–‡ä»¶

- **åˆçº¦é…ç½®**: `lucky/hardhat.config.ts`
- **éƒ¨ç½²è„šæœ¬**: `lucky/deploy/deploy.ts`
- **å‰ç«¯åœ°å€é…ç½®**: `lucky/frontend/abi/LuckyDiceAddresses.ts`
- **FHEVM SDK**: `lucky/frontend/fhevm/internal/RelayerSDKLoader.ts`

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

ç°åœ¨ä½ å¯ä»¥ï¼š

1. âœ… **åˆ‡æ¢åˆ° Sepolia ç½‘ç»œ**ï¼ˆMetaMaskï¼‰
2. âœ… **åˆ·æ–°é¡µé¢**ï¼ˆhttp://localhost:3000ï¼‰
3. âœ… **ç­‰å¾… FHEVM åˆå§‹åŒ–**ï¼ˆ10-30 ç§’ï¼‰
4. âœ… **å¼€å§‹æ¸¸æˆ**ï¼

---

**ç¥ä½ åœ¨ Sepolia æµ‹è¯•ç½‘ä¸Šç©å¾—å¼€å¿ƒï¼ğŸ²âœ¨**

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—æˆ–å‚è€ƒæœ¬æŒ‡å—çš„æ•…éšœæ’æŸ¥éƒ¨åˆ†ã€‚

