# 如何在终端运行 Lucky Dice 项目

## 方法一：使用 VSCode 集成终端（推荐）

如果你在 VSCode 中，这是最简单的方法：

### 步骤 1：打开第一个终端 - 启动节点
1. 在 VSCode 中按 `` Ctrl+` `` 打开终端
2. 确保在项目目录：`E:\Spring\Zama\lucky`
3. 运行：
```powershell
npx hardhat node
```
4. 保持这个终端运行，你会看到：
```
Started HTTP and WebSocket JSON-RPC server at http://127.0.0.1:8545/
Account #0: 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266 (10000 ETH)
...
```

### 步骤 2：打开第二个终端 - 部署合约
1. 在 VSCode 终端右上角点击 `+` 创建新终端
2. 或者按 `Ctrl+Shift+`
3. 在新终端运行：
```powershell
cd E:\Spring\Zama\lucky
npx hardhat deploy --network localhost
```
4. 看到成功输出：
```
deploying "LuckyDice"...
deployed at 0x... with XXX gas
LuckyDice contract: 0x...
```

### 步骤 3：打开第三个终端 - 启动前端
1. 再创建一个新终端（点击 `+` 或 `Ctrl+Shift+`）
2. 运行：
```powershell
cd E:\Spring\Zama\lucky\frontend
npm install     # 首次运行需要
npm run dev
```
3. 看到：
```
✓ Ready in Xms
○ Local: http://localhost:3000
```

### 步骤 4：使用应用
在浏览器打开：http://localhost:3000

---

## 方法二：使用 PowerShell 窗口

### 方式 A - 手动打开多个窗口

1. **窗口 1 - Hardhat 节点：**
   - 开始菜单搜索 "PowerShell"
   - 打开第一个 PowerShell 窗口
   - 运行：
   ```powershell
   cd E:\Spring\Zama\lucky
   npx hardhat node
   ```
   - 保持运行

2. **窗口 2 - 部署：**
   - 再打开一个 PowerShell 窗口
   - 运行：
   ```powershell
   cd E:\Spring\Zama\lucky
   npx hardhat deploy --network localhost
   ```

3. **窗口 3 - 前端：**
   - 再打开一个 PowerShell 窗口
   - 运行：
   ```powershell
   cd E:\Spring\Zama\lucky\frontend
   npm run dev
   ```

### 方式 B - 使用自动脚本

在项目目录运行我们创建的脚本：

```powershell
cd E:\Spring\Zama\lucky
.\start.ps1 -All
```

这会自动打开所需的窗口。

---

## 方法三：只测试合约（无需前端）

如果你只想测试合约功能，非常简单：

```powershell
cd E:\Spring\Zama\lucky
npx hardhat test
```

这会：
- 自动启动临时节点
- 自动部署合约
- 运行所有测试
- 测试完成后自动清理

输出：
```
  LuckyDice
    ✓ records a dice roll and decrypts its results
    ✓ restricts access to encrypted rolls until permission is granted

  2 passing (240ms)
```

---

## 当前你可以做的：

### 选项 1：先测试看看（最简单）
```powershell
npx hardhat test
```

### 选项 2：我帮你在当前终端运行测试
告诉我："运行测试"，我会直接执行。

### 选项 3：启动完整项目
我们需要：
1. 你手动打开 2-3 个额外的 PowerShell 或 VSCode 终端
2. 或者使用我创建的脚本在新窗口启动

---

## 快速问答

**Q: 为什么不能在一个终端运行所有东西？**

A: 因为：
- Hardhat 节点需要持续运行（不能退出）
- 前端服务器也需要持续运行（不能退出）
- 所以需要多个终端/窗口

**Q: 有没有更简单的方法？**

A: 有！运行测试命令：
```powershell
npx hardhat test
```
这个命令会：
- 自动管理一切
- 不需要手动启动节点
- 测试合约的所有功能
- 一条命令完成！

**Q: 我应该用哪种方法？**

A: 建议：
1. **刚开始/测试项目**：用 `npx hardhat test`
2. **开发前端**：用 VSCode 多终端（方法一）
3. **演示/使用**：用自动脚本（方法二-B）

---

## 现在让我们开始！

最简单的方式，我现在就可以帮你运行测试：

